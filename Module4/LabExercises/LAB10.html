<!DOCTYPE html>
<!-- Module 4 Lab 2

Mirza please find the figma prototype at the following link,
I have also invited you (via your IOD email) to view the base files in Figma directly.

https://www.figma.com/proto/0RtIXf7IPBtVlsA0flQBkB/calculator-screens?node-id=1-2&p=f&t=rJJofygkxmnhelpG-1&scaling=min-zoom&content-scaling=fixed&page-id=0%3A1&starting-point-node-id=1%3A2 -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <!-- added styles and scripts in same file for simplicity-->
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #a4a4a4;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 50px auto;
            background: #c88585;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            font-size: 16px;
        }
        button {
            cursor: pointer;
        }
        button.primary {
            background-color: #007bff;
            color: white;
            border: none;
        }
        button.secondary {
            background-color: #6c757d;
            color: white;
            border: none;
        }
        /* NB note syntax difference for button.active and
        button:hover*/
        button.active {
            background-color: #0056b3;
        }
        button:hover {
            opacity: 0.9;
        }
        #result {
            background-color: #e9ecef;
        }
        .operations {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        #equalsButton.active {
            background-color: #0056b3; /* Darker blue for equals button when active similar to operators*/
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Simple Calculator</h1>
        <!-- the below code is a simple calculator that allows the user to perform basic arithmetic operations.
        it includes a form with input fields for two numbers, buttons for the four basic operations 
        (addition, subtraction, multiplication, and division), and a 
        button to calculate the result. 
        The result is displayed in a read-only input field. 
        The calculator also includes a reset button to clear all inputs and results. 
        as per Lab brief-->
        <form id="calculatorForm">
            <div class="form-group">
                <label for="number1">Enter First Number</label>
                <input type="number" id="number1" placeholder="First Number">
            </div>
            <div class="form-group operations">
                <button type="button" class="primary" data-operation="add">+</button>
                <button type="button" class="primary" data-operation="subtract">-</button>
                <button type="button" class="primary" data-operation="multiply">x</button>
                <button type="button" class="primary" data-operation="divide">/</button>
            </div>
            <div class="form-group">
                <label for="number2">Enter Second Number</label>
                <input type="number" id="number2" placeholder="Second Number">
            </div>
            <div class="form-group">
                <button type="button" class="primary" id="equalsButton">=</button>
            </div>
            <div class="form-group">
                <button type="button" class="secondary" id="resetButton">Reset</button>
            </div>
            <div class="form-group">
                <label for="result">Result</label>
                <input type="text" id="result" placeholder="Result" readonly>
            </div>
        </form>
    </div>

    <script>
        // JavaScript code to handle calculator operations
        // and button interactions

        // initialize variables needed for the calculator
        // selectedOperation will store the operation selected by the user
        // calculationDone will track if a calculation has been performed
        // this will help in preventing multiple calculations without resetting
        let selectedOperation = null;
        let calculationDone = false;

        // add event listeners to the operation buttons and equals button
        // when an operation button is clicked, it will set the selectedOperation variable
        // and add the active class to the clicked button
        // when the equals button is clicked, it will perform the calculation based on the selected operation
        // and the input numbers, and display the result in the result field
        // if the calculation is done, it will prevent further calculations until reset
        // when the reset button is clicked, it will reset all fields and remove the active class from all buttons
        const operationButtons = document.querySelectorAll('.operations button');
        // in the below code, we are using the forEach method to loop through each button in the operationButtons NodeList
        // and adding an event listener to each button. When a button is clicked, it will remove the active class from all buttons
        operationButtons.forEach(button => {
            button.addEventListener('click', function() {
                if (calculationDone) {
                    alert('Please reset before starting a new calculation.');
                    return;
                }
                // in the below code, we are using the getAttribute method 
                // to get the value of the data-operation attribute of the clicked button
                // and storing it in the selectedOperation variable.
                // we are also removing the active class from all buttons and adding it to the clicked button
                // to indicate which operation is currently selected
                operationButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                // in the below code, we are using the this keyword to refer to the clicked button
                // and using the getAttribute method to get the value of the data-operation attribute
                // and storing it in the selectedOperation variable.
                selectedOperation = this.getAttribute('data-operation');
            });
        });

        // the below code is for the equals button
        // when the equals button is clicked, it will check if a calculation has already been done
        // if so, it will alert the user to reset before starting a new calculation
        document.getElementById('equalsButton').addEventListener('click', function() {
            if (calculationDone) {
                alert('Please reset before starting a new calculation.');
                return;
            }
            // in the below code, we are using the parseFloat function to convert the input values to numbers
            // and storing them in the number1 and number2 variables.
            // we are also checking if the input values are valid numbers using the isNaN function
            // if not, we will alert the user to enter valid numbers
            // if the selectedOperation is null, we will alert the user to select an operation
            const number1 = parseFloat(document.getElementById('number1').value);
            const number2 = parseFloat(document.getElementById('number2').value);
            let result;

            if (isNaN(number1) || isNaN(number2)) {
                alert('Please enter valid numbers.');
                return;
            }

            if (!selectedOperation) {
                alert('Please select an operation.');
                return;
            }
            // in the below code, we are using a switch statement to perform the selected operation
            // based on the value of the selectedOperation variable.
            // we are also checking if the selected operation is division and if the second number is zero
            // if so, we will alert the user that division by zero is not allowed
            // and return without performing the calculation
            switch (selectedOperation) {
                case 'add':
                    result = number1 + number2;
                    break;
                case 'subtract':
                    result = number1 - number2;
                    break;
                case 'multiply':
                    result = number1 * number2;
                    break;
                case 'divide':
                    if (number2 === 0) {
                        alert('Division by zero is not allowed.');
                        return;
                    }
                    result = number1 / number2;
                    break;
                // in the below code, we are using a default case to handle any invalid operation selected by the user
                // this is in the code but can not actually be triggered due to the way the buttons are set up
                default:
                    alert('Invalid operation selected.');
                    return;
            }

            // in the below we set calculationDone to true to indicate that a calculation has been performed
            document.getElementById('result').value = result;
            calculationDone = true;

            // Add active class to equals button
            this.classList.add('active');
        });

        // the below code is for the reset button
        // when the reset button is clicked, it will reset all input fields and the result field
        // it will also remove the active class from all operation buttons and the equals button
        document.getElementById('resetButton').addEventListener('click', function() {
            document.getElementById('calculatorForm').reset();
            document.getElementById('result').value = '';
            selectedOperation = null;
            calculationDone = false;
            // below we are removing the active class from all operation buttons and the equals button
            // NB note the use of the forEach method to loop through each button in the operationButtons NodeList
            // and the classList.remove method to remove the active class from each button
            // using the fat arrow function syntax for the forEach method
            operationButtons.forEach(btn => btn.classList.remove('active'));
            document.getElementById('equalsButton').classList.remove('active'); // Remove active class from equals button
        });
    </script>
</body>
</html>